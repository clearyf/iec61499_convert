<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC "-//Uppaal Team//DTD Flat System 1.1//EN" "http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd">
<nta>
  <declaration>// Global declarations
chan ic_VALUE;
chan ic_SETPOINT;
chan ic_DELAYEXP;
chan oc_EOOB;
chan oc_START;
chan oc_STOP;
bool value;
bool setpoint;
int[-32768,32767] tOn;
int[-32768,32767] tOff;
bool OOB;
int[-32768,32767] tDelay;
void ok()
{
	if (OOB)
	{
		OOB = false;
	}
	else
	{
		EOOB = false;
	}
	if (tDelay != 0)
	{
		tDelay = 0;
	}
	else
	{
		STOP = false;
	}
}
void waiting()
{
	tDelay = SEL(setpoint, tOff, tOn);
	SETPOINT = false;
}
void oob()
{
	if (!OOB)
	{
		OOB = true;
	}
	else
	{
		EOOB = false;
	}
	if (tDelay != 0)
	{
		tDelay = 0;
	}
}
</declaration>
  <template>
    <name x="0" y="0">svVerifyBoolLogic</name>
    <declaration>// Local declarations
</declaration>
    <location id="id1" x="106.90086" y="-1260.7164">
      <name x="116.90086" y="-1250.7164">__start_OK</name>
      <urgent/>
    </location>
    <location id="id2" x="136.90086" y="-1260.7164">
      <name x="146.90086" y="-1250.7164">__action_OK__EOOB_ok_</name>
      <urgent/>
    </location>
    <location id="id3" x="166.90086" y="-1260.7164">
      <name x="176.90086" y="-1250.7164">__action_OK__STOP__</name>
      <urgent/>
    </location>
    <location id="id4" x="196.90086" y="-1260.7164">
      <name x="206.90086" y="-1250.7164">OK</name>
    </location>
    <location id="id8" x="270.8174" y="2760.2463">
      <name x="280.8174" y="2770.2463">__start_OOB</name>
      <urgent/>
    </location>
    <location id="id9" x="300.8174" y="2760.2463">
      <name x="310.8174" y="2770.2463">__action_OOB__EOOB_oob_</name>
      <urgent/>
    </location>
    <location id="id10" x="330.8174" y="2760.2463">
      <name x="340.8174" y="2770.2463">OOB</name>
    </location>
    <location id="id0" x="-1912.4556" y="-43.097057">
      <name x="-1902.4556" y="-33.097057">START</name>
    </location>
    <location id="id5" x="-2082.8472" y="-647.6617">
      <name x="-2072.8472" y="-637.6617">__start_WAITING</name>
      <urgent/>
    </location>
    <location id="id6" x="-2052.8472" y="-647.6617">
      <name x="-2042.8472" y="-637.6617">__action_WAITING__START_waiting_</name>
      <urgent/>
    </location>
    <location id="id7" x="-2022.8472" y="-647.6617">
      <name x="-2012.8472" y="-637.6617">WAITING</name>
    </location>
    <init ref="id0"/>
    <transition>
      <source ref="id0"/>
      <target ref="id1"/>
      <label kind="synchronisation" x="0" y="0">ic_SETPOINT?</label>
      <label kind="guard" x="0" y="0">(setpoint = value)</label>
    </transition>
    <transition>
      <source ref="id7"/>
      <target ref="id8"/>
      <label kind="synchronisation" x="0" y="0">ic_DELAYEXP?</label>
    </transition>
    <transition>
      <source ref="id4"/>
      <target ref="id8"/>
      <label kind="synchronisation" x="0" y="0">ic_VALUE?</label>
      <label kind="guard" x="0" y="0">(value != setpoint)</label>
    </transition>
    <transition>
      <source ref="id10"/>
      <target ref="id1"/>
      <label kind="guard" x="0" y="0">value = setpoint</label>
    </transition>
    <transition>
      <source ref="id0"/>
      <target ref="id8"/>
      <label kind="synchronisation" x="0" y="0">ic_SETPOINT?</label>
      <label kind="guard" x="0" y="0">(setpoint != value)</label>
    </transition>
    <transition>
      <source ref="id4"/>
      <target ref="id5"/>
      <label kind="synchronisation" x="0" y="0">ic_SETPOINT?</label>
      <label kind="guard" x="0" y="0">setpoint != value</label>
    </transition>
    <transition>
      <source ref="id7"/>
      <target ref="id1"/>
      <label kind="guard" x="0" y="0">setpoint = value</label>
    </transition>
    <transition>
      <source ref="id7"/>
      <target ref="id5"/>
      <label kind="synchronisation" x="0" y="0">ic_SETPOINT?</label>
      <label kind="guard" x="0" y="0">(setpoint != value)</label>
    </transition>
    <transition>
      <source ref="id1"/>
      <target ref="id2"/>
      <label kind="synchronisation" x="0" y="0">oc_EOOB!</label>
      <label kind="update" x="0" y="0">ok();</label>
    </transition>
    <transition>
      <source ref="id2"/>
      <target ref="id3"/>
      <label kind="synchronisation" x="0" y="0">oc_STOP!</label>
    </transition>
    <transition>
      <source ref="id3"/>
      <target ref="id4"/>
    </transition>
    <transition>
      <source ref="id5"/>
      <target ref="id6"/>
      <label kind="synchronisation" x="0" y="0">oc_START!</label>
      <label kind="update" x="0" y="0">waiting();</label>
    </transition>
    <transition>
      <source ref="id6"/>
      <target ref="id7"/>
    </transition>
    <transition>
      <source ref="id8"/>
      <target ref="id9"/>
      <label kind="synchronisation" x="0" y="0">oc_EOOB!</label>
      <label kind="update" x="0" y="0">oob();</label>
    </transition>
    <transition>
      <source ref="id9"/>
      <target ref="id10"/>
    </transition>
  </template>
  <system>// System setup
svVerifyBoolLogicblk = svVerifyBoolLogic();
system svVerifyBoolLogicblk;
</system>
</nta>
